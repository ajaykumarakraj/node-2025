// const http = require("http")

// http.createServer((req, res) => {

//     if (req.url == "/") {
//         res.writeHead(200, { "content-type": "text/html" })
//         res.write(`
//     <form action="/submit" method="post">
//     <input type="text"  placeholder="name"/>
//     <button>submit</button>   
//     </form>
//     `)
//     } else if (req.url == "/submit") {
//         res.write(
//             `<h1>submitted</h1>`
//         )
//     }
//     res.end()

// }).listen(3000)
// by html file 


const http = require("http")
const fs = require("fs")
const queryString = require("querystring")
http.createServer((req, res) => {
    fs.readFile("./html/form.html", "utf-8", (err, data) => {
        if (err) {
            res.writeHead(500, { "content-type": "text/plain" })
            res.end("internal server error")
            return
        }
        res.writeHead(200, { "content-type": "text/html" })
        if (req.url == "/") {

            res.write(data)

        } else if (req.url == "/submit") {
            let dataBody = [];
            req.on('data', (chunk) => {
                dataBody.push(chunk)
            })
            req.on('end', () => {
                let rawData = Buffer.concat(dataBody).toString()

                let readableData = queryString.parse(rawData)

                datashow = "my name is " + readableData.name + " and my email id is" + readableData.email
                console.log(datashow)
                fs.writeFileSync("text/new.txt", datashow)
                console.log("file created")
            })
            res.write(`<h1>data submitted </h1>`)
        }
        res.end()
    })
}).listen(3000)



















































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































